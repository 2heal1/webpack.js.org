---
title: Module Variables
group: Modules
sort: 8
contributors:
  - skipjack
  - sokra
  - ahmehri
  - tbroadley
  - byzyk
  - EugeneHlushko
  - wizardofhogwarts
  - anikethsaha
  - chenxsan
  - jamesgeorge007
related:
  - title: CommonJS
    url: https://en.wikipedia.org/wiki/CommonJS
  - title: Asynchronous Module Definition
    url: https://en.wikipedia.org/wiki/Asynchronous_module_definition
translators:
  - carlz812
  - QC-L
  - jacob-lcs
---

本章节涵盖了使用 webpack 编译的代码中所有的**变量**。模块将通过 `module` 和其他变量，来访问编译过程中的某些数据。

<<<<<<< HEAD
## `module.loaded` (NodeJS) $#moduleloaded-nodejs$
=======
## module.loaded (NodeJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

`false` 表示该模块正在执行， `true` 表示同步执行已经完成。

<<<<<<< HEAD
## `module.hot` (webpack-specific) $#modulehot-webpack-specific$
=======
## module.hot (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

表示 [模块热替换(Hot Module Replacement)](/concepts/hot-module-replacement) 是否启用，并给进程提供一个接口。详细说明请查看 [模块热替换 API 页面](/api/hot-module-replacement)。

<<<<<<< HEAD
## `module.id` (CommonJS) $#moduleid-commonjs$
=======
## module.id (CommonJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

当前模块的 ID。

```javascript
module.id === require.resolve('./file.js');
```

<<<<<<< HEAD
## `module.exports` (CommonJS) $#moduleexports-commonjs$
=======
## module.exports (CommonJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

调用者通过 `require` 对模块进行调用时返回的值（默认为一个新对象）。

```javascript
module.exports = function doSomething() {
  // Do something...
};
```

W> 无法在异步函数中访问该变量。

<<<<<<< HEAD
## `exports` (CommonJS) $#exports-commonjs$
=======
## exports (CommonJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

该变量默认值为 `module.exports`（即一个对象）。 如果 `module.exports` 被重写的话， `exports` 不再会被导出。

```javascript
exports.someValue = 42;
exports.anObject = {
  x: 123,
};
exports.aFunction = function doSomething() {
  // Do something
};
```

<<<<<<< HEAD
## `global` (NodeJS) $#global-nodejs$
=======
## global (NodeJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

见 [node.js global](https://nodejs.org/api/globals.html#globals_global).

出于兼容性考虑，webpack 默认填充了 `global` 变量。

<<<<<<< HEAD
## `__dirname` (NodeJS) $#__dirname-nodejs$
=======
## \_\_dirname (NodeJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

取决于 `node.__dirname` 配置选项：

- `false`: 未定义
- `mock`: 等同于 `'/'`
- `true`: [node.js \_\_dirname](https://nodejs.org/api/globals.html#globals_dirname)

如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 `true` 处理。

<<<<<<< HEAD
## `import.meta.url` $#import-meta-url$
=======
## import.meta.url
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

返回模块以 `file:` 开头绝对路径的 URL。

**src/index.js**

```javascript
console.log(import.meta.url); // 输出结果类似于 `file:///path/to/your/project/src/index.js`
```

<<<<<<< HEAD
## `import.meta.webpack` $#import-meta-webpack$
=======
## import.meta.webpack
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

返回 webpack 的版本

**src/index.js**

```javascript
console.log(import.meta.webpack); // output `5` for webpack 5
```

## import.meta.webpackHot $#importmetawebpackhot$

webpack 特定。[`module.hot`](#modulehot-webpack-specific) 的一个别名，[strict ESM](/guides/ecma-script-modules/#flagging-modules-as-esm) 中可以使用 `import.meta.webpackHot` 但是不能使用 `module.hot`。

<<<<<<< HEAD
## `__filename` (NodeJS) $#__filename-nodejs$
=======
## \_\_filename (NodeJS)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

取决于 `node.__filename` 配置选项：

- `false`: 未定义
- `mock`: 等同于 `'/index.js'`
- `true`: [node.js \_\_filename](https://nodejs.org/api/globals.html#globals_filename)

如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 `true` 处理。

<<<<<<< HEAD
## `__resourceQuery` (webpack 特有变量) $#__resourcequery-webpack-specific$
=======
## \_\_resourceQuery (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

当前模块的资源查询(resource query) 。如果进行了如下的 `reqiure` 调用，那么查询字符串(query string)在`file.js` 中可访问。

```javascript
require('file.js?test');
```

**file.js**

```javascript
__resourceQuery === '?test';
```

<<<<<<< HEAD
## `__webpack_public_path__` (webpack 特有变量) $#__webpack_public_path__-webpack-specific$
=======
## \_\_webpack_public_path\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

等同于 `output.publicPath` 配置选项。

<<<<<<< HEAD
## `__webpack_require__` (webpack 特有变量) $#__webpack_require__-webpack-specific$
=======
## \_\_webpack_require\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

原始 require 函数。这个表达式不会被解析器解析为依赖。

## `__webpack_chunk_load__` (webpack 特有变量) $#__webpack_chunk_load__-webpack-specific$

内部 chunk 载入函数，有一个输入参数：

- `chunkId` 需要载入的 chunk id。

当一个 chunk 加载失败时，从备用公共路径加载 chunk 的示例：

```js
const originalLoad = __webpack_chunk_load__;
const publicPaths = ['a', 'b', 'c'];
__webpack_chunk_load__ = async (id) => {
  let error;
  for (const path of publicPaths) {
    __webpack_public_path__ = path;
    try {
      return await originalLoad(id);
    } catch (e) {
      error = e;
    }
  }
  throw error;
};
import('./module-a').then((moduleA) => {
  // now webpack will use the custom __webpack_chunk_load__ to load chunk
});
```

<<<<<<< HEAD
## `__webpack_modules__` (webpack 特有变量) $#__webpack_modules__-webpack-specific$
=======
## \_\_webpack_modules\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

访问所有模块的内部对象。

<<<<<<< HEAD
## `__webpack_hash__` (webpack 特有变量) $#__webpack_hash__-webpack-specific$
=======
## \_\_webpack_hash\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

这个变量提供对编译过程中(compilation)的 hash 信息的访问。

<<<<<<< HEAD
## `__non_webpack_require__` (webpack 特有变量) $#__non_webpack_require__-webpack-specific$
=======
## \_\_non_webpack_require\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

生成一个不会被 webpack 解析的 `require` 函数。配合全局可以获取到的 require 函数，可以完成一些酷炫操作。

<<<<<<< HEAD
## `__webpack_exports_info__` (webpack 特有变量) $#__webpack_exports_info__-webpack-specific$
=======
## \_\_webpack_exports_info\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

在模块中, `__webpack_exports_info__` 可以被获取到，以便导出模块用以自我检查：

- `__webpack_exports_info__` 总是 `true`

- 当导出模块未被使用时 `__webpack_exports_info__.<exportName>.used` 为 `false`, 否则是 `true`

- `__webpack_exports_info__.<exportName>.useInfo` 是

  - `false` 当导出模块未被使用
  - `true` 当导出模块被使用
  - `null` 当导出模块的使用情况取决于运行时的条件
  - `undefined` 当没有可用信息时

- `__webpack_exports_info__.<exportName>.provideInfo` 是

  - `false` 当导出模块没有被提供
  - `true` 当导出模块被提供
  - `null` 当导出模块的提供情况取决于运行时的条件
  - `undefined` 当没有可用信息时

- 可以从嵌套的 exports 中得到相关信息: 例如 `__webpack_exports_info__.<exportName>.<exportName>.<exportName>.used`

<<<<<<< HEAD
## `__webpack_is_included__` (webpack-specific) $#webpack-is-included$
=======
## \_\_webpack_is_included\_\_ (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

<Badge text="5.16.0+" />

测试给定的模块是否被 webpack 打包。

```js
if (__webpack_is_included__('./module-a.js')) {
  // do something
}
```

## \_\_webpack_base_uri\_\_ (webpack-specific) $#webpack-base-uri$

运行时修改 base 的 URI。

- 类型：`string`
- 可用：5.21.0+
- 示例:
  ```js
  __webpack_base_uri__ = 'https://example.com';
  ```

## \_\_webpack_runtime_id\_\_ $#webpackruntimeid$

访问当前入口的 [runtime](/blog/2020-10-10-webpack-5-release/#entry-point-runtime) id。

这是一个 webpack 特性，并且在 webpack 5.25.0 后可用。

**src/index.js**

```js
console.log(__webpack_runtime_id__ === 'main');
```

<<<<<<< HEAD
## `DEBUG` (webpack 特有变量) $#debug--webpack-specific$
=======
## DEBUG (webpack-specific)
>>>>>>> 4db15f6f03f5ff286192bc41da319b0171baea4e

等同于 `debug` 配置选项。
